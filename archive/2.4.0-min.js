/*!
 * Process Queue v2.4
 * https://github.com/Zodiase/PQUEUE
 *
 * Copyright 2013 Xingchen Hong
 * Released under the MIT license
 * https://raw.github.com/Zodiase/PQUEUE/master/LICENSE
 *
 * Date: 2013-07-17 19:48
 */
!function(a,b,d){function e(a){var b=(new Date).getTime()/1e3,c=parseInt(b,10);return a?b:Math.round(1e3*(b-c))/1e3+" "+c}function g(){return e(!0)-f}function h(a){b.log("@"+(g().toString(10)+"        ").substr(0,8)+", PQUEUE: "+a)}function i(a){b.warn("@"+(g().toString(10)+"        ").substr(0,8)+", PQUEUE: "+a)}function j(a){return"object"!=typeof a?!1:"function"!=typeof a.constructor?!1:"string"!=typeof a.constructor.name?!1:"Array"===a.constructor.name}b===d&&(c={log:function(){},warn:function(){}});var f=e(!0),k=[],l=function(){"use strict";function D(){var a="";for(var b in q.sharedHeap)""!==a&&(a+=", \n"),a+=b+":"+q.sharedHeap[b];return"{\n"+a+"\n}"}function F(a,b){var c=Boolean(q.status&b);return a!==d&&(a?q.status|=b:q.status&=~b),c}function G(a){return F(a,r)}function H(a){return F(a,s)}function I(a){return F(a,t)}function J(a){return F(a,u)}function K(a){return F(a,v)}function L(a){return F(a,w)}function M(a){return F(a,x)}function N(a){return F(a,y)}function O(a){return F(a,z)}function P(a){return F(a,A)}function R(){L(q.processCounter<0),M(q.processCounter>=q.processStack.length),N(q.nextProcess===n),O(q.nextProcess===o),P("function"!=typeof q.nextProcess),K(L()||M()||P())}function S(a){"number"==typeof a&&(q.processCounter=a,q.nextProcess=q.processStack[q.processCounter],R())}function T(){K()||S(q.processCounter+1)}function U(){K()||S(q.processCounter-1)}function V(){"number"==typeof newPc&&(q.processCounter+=newPc,q.nextProcess=q.processStack[q.processCounter],R())}function W(a){var b=q.processIndexs[String(a)];return"number"==typeof b?b:-1}function X(){return q.processCounter}function Y(){return"function"==typeof q.nextProcess?q.nextProcess.name:String(q.processCounter)}function Z(a){K(!0),q.errorMessages.push("string"==typeof a?a:"")}function $(){for(i("pcUnderflow: "+Boolean(L())),i("pcOverflow: "+Boolean(M())),i("pcAtNoOp: "+Boolean(P())),i("pcAtHalt: "+Boolean(N())),i("pcAtBarrier: "+Boolean(O()));q.errorMessages.length>0;)i(q.errorMessages.shift())}function _(){I()||(I(!0),h("["+q.name+"].boot"),q.clock=a.setInterval(bb,0))}function ab(){I()&&(I(!1),h("["+q.name+"].halt"),a.clearInterval(q.clock))}function bb(){if(I()&&!J()&&!H()){if(H(!0),h("["+q.name+"].tick"),K())return i("Has error(s)"),H(!1),$(),ab(),void 0;if(N())return H(!1),ab(),void 0;var a=q.processCounter,b=q.nextProcess;T(),h("PC:"+a+">>"+b.name),G(!0);try{b.call(B,B,B.heap)}catch(c){Z(c.message)}G(!1),H(!1)}}function cb(b){q.wakerStack.push(a.setTimeout(B.resume,b))}function db(){for(;q.wakerStack.length>0;)a.clearTimeout(q.wakerStack.shift())}function eb(a){J(!0),"number"==typeof a&&cb(a)}function fb(){J(!1),db()}var b=null,c=[],e=0,f="";switch(arguments.length){case 1:var g=typeof arguments[0];if("string"===g)return k[arguments[0]];if("object"!==g)return null;if(j(arguments[0]))c=arguments[0];else{if(!j(arguments[0].processArray))return null;b="object"==typeof arguments[0].parent?arguments[0].parent:null,c=arguments[0].processArray,e="number"==typeof arguments[0].initialProcessID?arguments[0].initialProcessID:0,f="string"==typeof arguments[0].queueName?arguments[0].queueName:""}break;case 2:var g=typeof arguments[0],l=typeof arguments[1];if("object"===g&&"object"===l)b=arguments[0],c=arguments[1],e=0,f="";else if("object"===g&&"number"===l)b=null,c=arguments[0],e=arguments[1],f="";else{if("object"!==g||"string"!==l)return null;b=null,c=arguments[0],e=0,f=arguments[1]}break;case 3:var g=typeof arguments[0],l=typeof arguments[1],m=typeof arguments[2];if("object"===g&&"object"===l&&"number"===m)b=arguments[0],c=arguments[1],e=arguments[2],f="";else if("object"===g&&"object"===l&&"string"===m)b=arguments[0],c=arguments[1],e=0,f=arguments[2];else{if("object"!==g||"number"!==l||"string"!==m)return null;b=null,c=arguments[0],e=arguments[1],f=arguments[2]}break;case 4:var g=typeof arguments[0],l=typeof arguments[1],m=typeof arguments[2],p=typeof arguments[3];if("object"!==g||"object"!==l||"number"!==m||"string"!==p)return null;b=arguments[0],c=arguments[1],e=arguments[2],f=arguments[3];break;default:return null}if(2===arguments.length&&"object"==typeof arguments[0]&&"object"==typeof arguments[1]&&(b=arguments[0],c=arguments[1]),2===arguments.length&&"object"==typeof arguments[0]&&"object"==typeof arguments[1]&&(b=arguments[0],c=arguments[1]),h("Instantiating new process queue."),"object"!=typeof c)return i("Invalid argument[1]. Expecting an Object."),i("Returning NULL."),null;h("Generating new process queue object.");for(var q={clock:0,parent:b&&"object"==typeof b&&b.PQUEUE?b:null,name:"",status:0,errorMessages:[],processStack:[],processIndexs:[],processCounter:0,nextProcess:null,sharedHeap:{},wakerStack:[]},r=1,s=2,t=4,u=8,v=16,w=32,x=64,y=128,z=256,A=512,B={heap:q.sharedHeap,heap_dump:D,pause:function(a){G()&&!J()&&eb(a)},resume:function(){J()&&fb()},pc:{increment:T,decrement:U,offset:V,"goto":S,locate:W,valueOf:X,toString:Y},isPaused:function(){return J()},parent:q.parent},C={boot:_,halt:ab},gb=0,hb=c.length;hb>gb;++gb){var ib=c[gb],jb=ib.name,kb=q.processStack.length;q.processStack.push(ib),""!==jb&&(q.processIndexs[jb]=kb)}return S("number"==typeof e?e:0),"string"==typeof f&&""!==f?(q.name=f,k[f]=B):q.name=String((new Date).getTime()),C},m="2.4",n=function(){},o=function(a){a.pause()};a.PQUEUE,a.PQUEUE_HALT,a.PQUEUE_BARRIER,l.PQUEUE=m,"object"==typeof a&&"object"==typeof a.document&&(a.PQUEUE=l,a.PQUEUE_HALT=n,a.PQUEUE_BARRIER=o)}(window,console);